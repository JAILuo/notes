## ARM架构

![image-20230928223305971](image-20230928223305971.png)



[ARM v8处理器概述、架构、及技术介绍 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/613477355#:~:text=ARMv8架构的概述 1  Cortex-A5%2C Cortex-A7%2C Cortex-A8%2C Cortex-A9%2C Cortex-A15以及Cortex-A17处理器全部由,ARMv7-A 架构实现。 2  Cortex-A53，Cortex-A57 和Cortex-A73处理器由 ARMv8-A 架构实现。)







- **Cortex-M3**：这是一种低功耗、高性能的微控制器架构，适用于嵌入式系统和物联网设备。
- **Cortex-M4**：与Cortex-M3相比，Cortex-M4具有更高的性能和更多的功能，例如数字信号处理（DSP）扩展指令集，适用于需要更高性能的应用。
- **Cortex-A9**：这是一种面向高性能应用的应用处理器架构，适用于智能手机、平板电脑和其他移动设备。
- **Cortex-A7**：与Cortex-A9相比，Cortex-A7具有更低的功耗和更小的尺寸，适用于低功耗移动设备。



#### Cortex-M3/M4

- **Cortex-M3**架构是一种**通用、确定性**的32位性能微控制器架构。它是为各种设备的成本敏感和功耗受限解决方案而设计的。Cortex-M3在**面积、性能和功耗之间取得了最佳平衡，非常适合微控制器、汽车车身系统、工业控制系统以及无线网络和传感器等产品**。
    Cortex-M3是一个内存映射系统，具有一个简单的、固定的线性内存映射，可寻址4GB的内存空间，其中预定义了用于代码（代码空间）、SRAM（内存空间）、外部存储器/设备以及内部/外部外设的专用地址。
- **Cortex-M4**架构是一种低成本、高性能的嵌入式处理器，旨在满足数字信号控制市场对控制和信号处理能力高效且易于使用的需求。它结合了高效的信号处理功能与Cortex-M系列处理器的低功耗、低成本和易用性优势，满足了许多市场的需求，包括电机控制、汽车、电源管理、嵌入式音频和工业自动化等行业。
    Cortex-M4架构与Cortex-M3架构在体系结构上基本相同，唯一的区别是Cortex-M4集成了DSP单元。这使得Cortex-M4架构非常适合数字信号控制应用，例如音频编码/解码、滤波和均衡等。













## 关于通用寄存器

> ARM架构中的通用寄存器R0-R15

- **调用者保存的寄存器(caller saved registers)**
- **被调用者保存的寄存器(callee-saved registers)**

这两个有点难区分, 举个实际代码的例子就清楚了.

```C
int add(int a, int b) 
{
	return a + b;
}
int main()
{
	int result = add(3, 4);
	// 其他操作
	return 0;
}
```

在上述代码中，`main()`函数是调用者，`add()`函数是被调用者。当`main()`函数调用`add()`函数时，`main()`函数会将参数3和4传递给`add()`函数，并等待`add()`函数的返回值。

在这个过程中，调用者需要保存一些寄存器的值，以便在函数调用结束后能够恢复原始值。这些寄存器的值在函数调用期间可能会被修改。而被调用者需要保存一些寄存器的值，并在函数调用结束后恢复这些寄存器的值。这些寄存器的值在函数调用期间不会被修改。

具体到上述例子中，`main()`函数是调用者，它需要保存R0和R1寄存器的值，因为这两个寄存器用于传递`add()`函数的参数。而`add()`函数是被调用者，它需要保存R4和R5寄存器的值，因为这两个寄存器用于存储`add()`函数的局部变量和临时变量。

在ARM架构中，调用者保存的寄存器是R0-R3和R12，被调用者保存的寄存器是R4-R11。这只是一般情况下的约定，具体的寄存器分配可能会因编译器、编译选项和函数调用约定而有所不同。
