以 bash 为主，其他都比较类似的。

记录自己的一些不会的知识点、一些常用脚本



## `basc -c`

`bash -c` 是 Bash 中的一个常用选项，它允许你直接在命令行中传递一段字符串作为命令来执行，而不是从文件或交互式输入中读取。这在需要快速执行单行脚本、动态生成命令或通过其他程序调用 Bash 时非常有用。以下是详细的解释和示例：

---

### **基本语法**
```bash
bash -c "命令字符串" [参数0] [参数1] [参数2] ... 
```
- `-c` 表示后续内容是一个要执行的命令字符串。
- 命令字符串需要用引号包裹（单引号或双引号）。
- 参数0 通常是脚本名称（类似 `$0`），参数1、参数2 等对应 `$1`、`$2`...

---

### **示例 1：简单命令**
直接在命令行中执行一条命令：
```bash
bash -c "echo Hello, World!"
```
输出：
```
Hello, World!
```

---

### **示例 2：传递参数**
通过参数动态传递变量：
```bash
bash -c 'echo "参数1: $1, 参数2: $2"' mybash arg1 arg2
```
输出：
```
参数1: arg1, 参数2: arg2
```
- `mybash` 是 `$0`（脚本名），`arg1` 是 `$1`，`arg2` 是 `$2`。

---

### **示例 3：结合变量和环境变量**
在外部定义变量，并在命令字符串中使用：
```bash
NAME="Alice"
bash -c "echo 外部变量: \$NAME 和当前Shell的PID: $$"
```
输出：
```
外部变量: Alice 和当前Shell的PID: 12345
```
- `\$NAME` 中的反斜杠确保变量在子 Shell 中展开（如果外部环境没有 `NAME` 变量，这里会为空）。
- `$$` 表示当前 Shell 的 PID，但实际会显示父 Shell 的 PID，因为它在父 Shell 中展开。

---

### **示例 4：使用单引号与双引号的区别**
- **双引号**：变量在父 Shell 中展开。
  ```bash
  VAR="World"
  bash -c "echo Hello, $VAR"  # 输出 Hello, World（变量在父 Shell 展开）
  ```

- **单引号**：变量在子 Shell 中展开。
  ```bash
  VAR="World"
  bash -c 'echo Hello, $VAR'  # 输出 Hello, （子 Shell 中 $VAR 未定义）
  ```

---

### **示例 5：结合循环和条件**
执行更复杂的逻辑：
```bash
bash -c '
for i in {1..3}; do
  if [ $i -eq 2 ]; then
    echo "第 $i 次循环"
  fi
done
'
```
输出：
```
第 2 次循环
```

---

### **示例 6：通过其他程序调用**
比如通过 `find` 结合 `bash -c` 处理文件：
```bash
find . -name "*.txt" -exec bash -c 'echo 发现文本文件: "$1"' _ {} \;
```
- `_` 是占位符（对应 `$0`），`{}` 是文件名（对应 `$1`）。

---

### **示例 7：远程执行命令**
通过 SSH 在远程服务器上执行命令：
```bash
ssh user@example.com "bash -c 'echo 当前用户是: \$USER'"
```
输出：
```
当前用户是: user
```

---

### **注意事项**
1. **引号嵌套**：如果命令字符串中有引号，需要正确转义：
   ```bash
   bash -c "echo '这是一个带单引号的句子'"
   ```

2. **转义字符**：使用反斜杠 `\` 转义特殊符号：
   ```bash
   bash -c "echo \"Hello, \\\"World\\\"\""
   ```

3. **作用域隔离**：`bash -c` 启动的是一个子 Shell，其环境变量和当前 Shell 是隔离的（除非显式导出）。

---

### **典型使用场景**
- 快速测试单行脚本。
- 动态生成命令（如结合 `xargs`、`find`）。
- 在脚本中切换 Shell 环境（如从 `/bin/sh` 切换到 `bash`）。
- 远程执行命令（通过 SSH 或类似工具）。

掌握 `bash -c` 可以让你更灵活地在命令行中操作！