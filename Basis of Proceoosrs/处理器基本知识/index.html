
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://jailuo.github.io/notes/Basis%20of%20Proceoosrs/%E5%A4%84%E7%90%86%E5%99%A8%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.48">
    
    
      
        <title>处理器基本知识 - Messy Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Messy Notes" class="md-header__button md-logo" aria-label="Messy Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Messy Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              处理器基本知识
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/JAILuo/notes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Messy Notes" class="md-nav__button md-logo" aria-label="Messy Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Messy Notes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/JAILuo/notes" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ysyx
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            ysyx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NJU-ICS2023-PA
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            NJU-ICS2023-PA
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/pa/pa1/pa1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PA1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/pa/pa2/pa2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PA2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/pa/pa3/pa3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PA3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/pa/pa4/pa4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PA4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/pa/c_marco/macro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C Macro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/pa/summary/summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/pa/Linux_porting/porting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux Porting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ysyx/digital-circuit/digital%20circuit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Digital Circuit
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      简单概述
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      处理器设计步骤
    </span>
  </a>
  
    <nav class="md-nav" aria-label="处理器设计步骤">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      分析指令系统。
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      选择组件 建立通路
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      建立控制器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      超标量和流水线
    </span>
  </a>
  
    <nav class="md-nav" aria-label="超标量和流水线">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      早期处理器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      现代处理器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      架构/处理器概念
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      存储
    </span>
  </a>
  
    <nav class="md-nav" aria-label="存储">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      存储层次结构和基本认识
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sramdarm" class="md-nav__link">
    <span class="md-ellipsis">
      SRAM和DARM结构和差别
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      缓存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      内存
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      存储容量的计算
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      不同单位的使用示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      中断和异常
    </span>
  </a>
  
    <nav class="md-nav" aria-label="中断和异常">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      概念问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x86" class="md-nav__link">
    <span class="md-ellipsis">
      x86实模式下的中断向量表
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x86_1" class="md-nav__link">
    <span class="md-ellipsis">
      ( 拓展 ) x86保护模式下的寻址方式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x86_2" class="md-nav__link">
    <span class="md-ellipsis">
      x86保护模式下的中断描述符表
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#io" class="md-nav__link">
    <span class="md-ellipsis">
      IO
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>处理器基本知识</h1>

<h2 id="_1">简单概述</h2>
<ol>
<li>
<p><strong>基本组成部分</strong>：CPU的基本组成部分包括算术逻辑单元（ALU）、控制单元、寄存器和时钟。ALU执行算术和逻辑运算，控制单元管理指令的执行，寄存器用于暂存数据和指令，时钟控制CPU的工作时序。</p>
</li>
<li>
<p><strong>指令集架构</strong>：CPU执行的指令由指令集架构（ISA）定义。ISA决定了CPU所能执行的指令集合，包括算术运算、逻辑运算、数据传输、控制流等操作。</p>
</li>
<li>
<p><strong>寄存器</strong>：CPU内部包含多个寄存器，包括通用寄存器、程序计数器（PC）、指令寄存器（IR）等。寄存器用于存储临时数据、指令地址和指令等。</p>
</li>
<li>
<p><strong>时钟和时序</strong>：CPU的工作受时钟信号的控制，时钟信号决定了CPU内部各个部件的工作时序，包括指令的获取、译码、执行和写回等操作。</p>
</li>
<li>
<p><strong>流水线</strong>：现代CPU通常采用流水线技术，将指令执行过程分为多个阶段，使得多条指令可以同时在不同阶段执行，提高了CPU的效率。</p>
</li>
<li>
<p><strong>缓存</strong>：CPU包含多级缓存，包括L1、L2、L3缓存等，用于暂存频繁使用的数据和指令，以提高内存访问速度。</p>
</li>
<li>
<p><strong>指令执行</strong>：CPU执行指令的基本步骤包括指令获取、指令译码、执行、写回等阶段，不同的指令需要经过不同的处理流程。</p>
</li>
</ol>
<h2 id="_2">处理器设计步骤</h2>
<p><img alt="屏幕快照 2018-07-09 13.14.50" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215160856685-103574627.png" /></p>
<h4 id="_3">分析指令系统。</h4>
<ul>
<li>
<p>指令系统</p>
<blockquote>
<p>指令系统是在处理器设计之前，就由软件和硬件的设计人员共同协商决定的。通过分析指令系统，我们可以得出指令所要操作的数据，需要通过怎样的一个电路的结构，这就是数据通路</p>
</blockquote>
</li>
</ul>
<h4 id="_4">选择组件 建立通路</h4>
<blockquote>
<p>在我们得到这样的需求之后，我们就可以为数据通路选择合适的集成电路组件。比如说加法器、减法器、寄存器等等；</p>
<p>选好了合适的组件之后，我们就按照最开始分析出的需求，把这些组件连接起来，就构成了完整的数据通路；</p>
</blockquote>
<h4 id="_5">建立控制器</h4>
<blockquote>
<p>但是仅有数据通路是不够的，我们还需要控制这个数据通路应该如何工作。因此，第4步是要分析每条指令的实现，以确定控制数据通路工作的控制信号；最后，是把这些控制信号汇总起来，<strong>形成完整的控制逻辑，也可以称之为控制器。</strong></p>
</blockquote>
<h2 id="_6">超标量和流水线</h2>
<p><img alt="Screen Shot 2018-09-29 at 8.30.155 pm" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215155653950-192565519.png" /></p>
<p><img alt="Screen Shot 2018-09-29 at 8.43.17 pm" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154801198-2147293360.png" /></p>
<p><img alt="Screen Shot 2018-09-29 at 8.43.38 pm" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154801826-893263594.png" /></p>
<p><img alt="Screen Shot 2018-09-29 at 8.52.08 pm" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154700955-589416295.png" /><strong>流水线 ：提高并行性</strong></p>
<p><strong>超标量：并行指令执行</strong></p>
<p><strong>本质都是空间上的利用</strong></p>
<h4 id="_7">早期处理器</h4>
<p><img alt="image-20231119162559320" src="../pic/image-20231119162559320.png" /></p>
<ul>
<li>
<p><strong>CPU Core：之前设计的数据通路</strong></p>
<blockquote>
<p>这里数据通路包含广一点</p>
<ol>
<li><strong>寄存器：</strong>用于暂存指令、数据和地址等信息。</li>
<li><strong>算术逻辑单元（ALU）：</strong>用于执行算术和逻辑运算，比如加法、减法、乘法、逻辑与、逻辑或等。</li>
<li><strong>控制单元</strong>：用于控制数据通路中各个部件的工作，根据指令的要求来控制数据通路的操作。</li>
<li>数据选择器/多路复用器：用于选择需要传输的数据或信号。</li>
<li>数据存储器（内存）：用于存储数据和指令。</li>
<li>输入/输出接口：用于与外部设备进行数据交换。</li>
<li>时钟：用于同步各个部件的工作。</li>
</ol>
</blockquote>
</li>
<li>
<p><strong>32KB I-Cache：之前设计的指令存储器</strong></p>
</li>
<li>
<p><strong>32KB D-Cache：之前设计的数据存储器</strong></p>
</li>
<li>
<p><strong>256KB L2 Cache</strong></p>
</li>
<li>
<p><strong>十六级流水线：</strong></p>
</li>
<li>
<p><strong>四发射：超标量</strong> </p>
</li>
</ul>
<p><strong>这些部件关系紧密，将上述部分称之为超标量处理器核</strong>。</p>
<p><strong>早期的单核时代：一个处理器核造成一个CPU</strong></p>
<blockquote>
<p>（四发射-十六级流水线)</p>
<ul>
<li>四发射：一次性完成了四条指令，取值译码...执行写回</li>
<li>十六级流水线：以<strong>5级流水线</strong>为基础，将指令执行的5个阶段划分为16个部分</li>
</ul>
</blockquote>
<h4 id="_8">现代处理器</h4>
<p><strong>多个处理器核 + 共享部件（8MB L3 Cache...）+ ... 构成一个CPU</strong></p>
<p><img alt="image-20231119162552250" src="../pic/image-20231119162552250.png" /></p>
<blockquote>
<ul>
<li>
<p>当涉及多核和多CPU系统时，从处理器的组织方式以及操作系统如何管理并利用这些资源来理解。</p>
</li>
<li>
<p><strong>多CPU系统</strong></p>
<blockquote>
<ul>
<li>
<p><strong>多CPU系统</strong>指计算机系统中有多个独立的中央处理器（CPU）。</p>
</li>
<li>
<p><strong>每个CPU都可以独立地执行指令，这意味着系统可以同时处理多个任务，从而提高整体性能。</strong></p>
</li>
<li>
<p>多CPU系统可以通过两种方式来工作：</p>
<ul>
<li>对称多处理器（SMP）：每个CPU都连接到共享的内存和I/O总线。操作系统可以将任务分配给不同的CPU来并行执行，从而提高系统的整体处理能力。</li>
<li>非对称多处理器（ASMP）：每个CPU连接到自己的内存和I/O总线。这种配置通常用于大型系统，其中每个CPU专门用于执行特定类型的任务。</li>
</ul>
</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>多核系统</strong></p>
<blockquote>
<ul>
<li>
<p><strong>多核系统</strong>是指单个CPU集成了多个处理核心。</p>
</li>
<li>
<p>每个核心可以独立地执行指令，因此多核系统可以同时处理多个任务。</p>
</li>
<li>
<p>多核系统可以通过<strong>超线程技术</strong>来模拟多个逻辑处理器，从而提高系统的并行处理能力。</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p>进程</p>
<blockquote>
<ul>
<li>
<p><strong>进程</strong>是程序执行时的一个实例，每个进程都有独立的内存空间和系统资源。</p>
</li>
<li>
<p><strong>在操作系统中，进程是资源分配的基本单位，每个进程都有独立的地址空间和上下文。</strong></p>
</li>
<li>
<p>多CPU和多核系统可以同时运行多个进程，从而提高系统的处理能力。</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>线程</strong></p>
<blockquote>
<ul>
<li>
<p><strong>线程</strong>是进程内的一个执行单元，同一进程内的多个线程共享进程的内存空间和系统资源。</p>
</li>
<li>
<p><strong>线程可以看作是轻量级的进程，它们可以并发执行，共享进程的资源。</strong></p>
</li>
<li>
<p>多CPU和多核系统可以同时运行多个线程，从而提高系统的并行处理能力。</p>
</li>
</ul>
</blockquote>
</li>
<li>
<p><strong>任务</strong></p>
<blockquote>
<ul>
<li>
<p><strong>任务通常是一个更高层次的概念，它可以是一个进程或者线程。</strong></p>
</li>
<li>
<p>在某些系统中，任务可能是指操作系统分配的一项工作，可以是一个进程或者线程的执行实例。在这种情况下，任务类似于线程，是操作系统调度和管理的基本单位。</p>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<h2 id="_9">架构/处理器概念</h2>
<blockquote>
<p>以最为常使用的ARM架构为例</p>
</blockquote>
<p><img alt="image-20230928223305971" src="../pic/image-20230928223305971-17004927098041.png" /></p>
<ul>
<li>
<p>ARM架构: ARM指令集架构 </p>
<blockquote>
<p>常说的xxx架构: ARM架构、MIPS架构、x86架构、POWER架构等, <strong>说的就是基于哪种系列的不同指令集,就被称为xxx架构</strong></p>
<blockquote>
<p>当然ARM和x86指令集里面都包含了很多指令集（针对各种场景、计算开发的指令集）。</p>
</blockquote>
</blockquote>
</li>
<li>
<p>ARM结构处理器: 采用了ARM架构的处理器</p>
</li>
<li>
<p>ARM处理器芯片: </p>
<blockquote>
<p>这个概念由于时代的变更变得稍微有点难理解, 所以想搞清楚处理器的概念, 那就得从以前的处理器/CPU说起(参考前面早期处理器和现代处理器)</p>
<ul>
<li>早期处理器: 一个处理器核(CPU) + 一些简单缓存 ——&gt;处理器</li>
<li>发展中的处理器: 一个CPU里多个处理器核/多个CPU + 缓存 +共享部件 ——&gt;处理器(Soc)</li>
<li>Soc 如下: 处理器核 + 各种IO设备(系统外设) + 图形处理器(GPU) + 通信模块 + 内存控制器+ (NPU/TPU/...)</li>
</ul>
</blockquote>
</li>
</ul>
<p><img alt="Screen Shot 2018-05-27 at 10.14.01" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215164731270-513112513.png" /></p>
<p><img alt="image-20231120212325665" src="../pic/image-20231120212325665.png" /></p>
<p>这里或许会对各种内存/存储相关概念感到迷惑, 统一再下一章总结一下</p>
<ul>
<li>手机电脑上常说的内存/存储: 8GB + 256GB</li>
<li>处理器里面又有主存储器(取决于芯片的性能: 从几十K到几十M)</li>
<li>处理器核里面又有各种几级缓存cache(L1 L2...)</li>
</ul>
<h2 id="_10">存储</h2>
<h4 id="_11">存储层次结构和基本认识</h4>
<p><img alt="Screen Shot 2018-09-29 at 9.26.53 pm" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154410172-1780106953.png" /></p>
<p><img alt="Screen Shot 2018-09-29 at 9.27.02 pm" src="../pic/605033-20181215154411684-445912452.png" /></p>
<p><img alt="Screen Shot 2018-09-29 at 9.27.19 pm" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154410048-500817885.png" /></p>
<blockquote>
<p>对于前面的问题:</p>
<ul>
<li>手机电脑上常说的内存/存储: 8GB + 256GB</li>
<li>处理器里面又有主存储器(取决于芯片的性能: 从几十K到几十M)</li>
<li>处理器核里面又有各种几级缓存cache(L1 L2...)</li>
<li>...</li>
</ul>
</blockquote>
<p>借助上图, 了解存储相关知识可以解释</p>
<p>从下往上: </p>
<ol>
<li>
<p>手机的存储/PC硬盘: 使用磁盘/硬盘(Disk)/flash等ROM  (256GB 512GB往上)</p>
</li>
<li>
<p>手机的内存/PC的内存: 由主存(DRAM)构成 (目前8GB左右)</p>
</li>
<li>
<p>高速缓存: 这里面概念过多, 分了很多层, 位置也有些不同, 上一章图中的主存储器指的就是缓存</p>
<blockquote>
<p>处理器内部有多级缓存，包括一级缓存（L1 Cache）、二级缓存（L2 Cache）和三级缓存（L3 Cache）。这些缓存用于临时存储处理器<strong>需要频繁访问的数据和指令</strong>，以提高数据访问速度和整体性能。</p>
<p>L1缓存通常是<strong>集成在处理器核心内部，速度最快但容量较小。L2和L3缓存通常更大，但速度相对较慢</strong>，同时也更接近主存储器。这些缓存层级的设计是为了更好地平衡速度和容量之间的权衡，以提供更高效的数据访问。</p>
</blockquote>
</li>
<li>
<p>通用寄存器: 就建在处理器核里, 不多解释</p>
</li>
</ol>
<h4 id="sramdarm">SRAM和DARM结构和差别</h4>
<p><img alt="Screen Shot 2018-09-30 at 8.33.29 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154306620-934333232.png" /></p>
<p><img alt="Screen Shot 2018-09-30 at 8.33.57 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154306375-1985927701.png" /></p>
<p><img alt="Screen Shot 2018-09-30 at 8.35.03 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154307689-1885064549.png" /></p>
<h4 id="_12">缓存</h4>
<p><img alt="Screen Shot 2018-09-30 at 9.15.50 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154100008-991956125.png" /></p>
<p><img alt="Screen Shot 2018-09-30 at 9.16.52 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154100928-1986907530.png" /></p>
<h4 id="_13">内存</h4>
<p>评价内存的两个重要指标</p>
<ul>
<li>访存延迟</li>
<li>访存带宽</li>
<li>tRCD CL tRP</li>
</ul>
<blockquote>
<p>带宽 理解为直接一次性读取多少个数据，像SDR:经过访存延迟后一次取出一个Byte数据</p>
<p>之后DDR2 3 4不断改进，访存延迟后一次读两个/四个Byte。</p>
<p>这样子做提高了访存带宽，但是也加大了访存延迟(一次取多个数据，tRCD 和CL时间也会增加</p>
</blockquote>
<h4 id="_14">存储容量的计算</h4>
<p><img alt="Screen Shot 2018-09-30 at 9.23.59 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154009814-677917584.png" /></p>
<p>计算机当中大多数的单位前缀都还是采用十进制的形式，并且符合国际单位制的要求。</p>
<p>只有在<strong>计算内部存储器容量</strong>时，采用了二进制的形式</p>
<p><img alt="Screen Shot 2018-09-30 at 9.24.09 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215154009698-598448490.png" /></p>
<blockquote>
<p>对现状，IEEE的标准将会使用大家公认的国际单位制前缀的定义。那么mega，也就是我们说的兆，也就是指100万，不再有2的20次方这样另一个定义。当然这里也说了，如果能够明确指出是以2为底的，也可以作为个例单独处理，直到有一种新的标准专门用于二进制的单位前缀。</p>
</blockquote>
<h4 id="_15"></h4>
<h4 id="_16">不同单位的使用示例</h4>
<ul>
<li>
<p><strong>使用二进制: 2^10^</strong></p>
<ol>
<li>
<p>RAM和ROM的存储大小，<strong>属于计算机内部存储</strong></p>
<blockquote>
<p>20K的SRAM/DARM: 20 * 2^10^ Byte</p>
</blockquote>
</li>
<li>
<p>文件大小 </p>
<blockquote>
<p>4MB的File: 4 * (2^10^)^2^ Byte</p>
</blockquote>
</li>
</ol>
</li>
<li>
<p><strong>使用二进制: 10^3^</strong></p>
<ol>
<li>
<p><strong>网络传输速率:</strong></p>
<blockquote>
<p>比如: 以太网、Wi-Fi...</p>
<p>100Mbps: 100 * 10^6^ bits</p>
</blockquote>
</li>
<li>
<p><strong>网络带宽</strong></p>
<blockquote>
<p>居民网络带宽
50Mbps :同上</p>
</blockquote>
</li>
<li>
<p><strong>外部存储</strong></p>
<blockquote>
<p><strong>==特别注意==</strong>: 硬盘容量<strong>历史上使用二进制单位</strong>进行标记和市场销售，但随着硬盘存储技术的不断发展，成本和容量的发展极度不一致，导致容量越来越大，大到GB以上，这就导致了和现实的国际物理单位有冲突，故<strong>近年来转向使用十进制单位</strong>。评估硬盘容量时，必须注意所使用的测量系统。</p>
<p>hard drive容量 512GB: 512 * 10^9^ Byte 
Q: 为什么买回来的1T硬盘, 在计算机上实际显示的大小不足1TB？</p>
<p>A: 原因就在于<strong>计算机内部和外部使用了不同的计数单位</strong>。</p>
</blockquote>
</li>
</ol>
</li>
</ul>
<h2 id="_17">中断和异常</h2>
<blockquote>
<p>内容要点：中断与异常的异同，中断处理的过程</p>
</blockquote>
<h4 id="_18">概念问题</h4>
<blockquote>
<p>有些定义不同</p>
</blockquote>
<p>中断和异常在处理器的工作中都是用来处理外部事件的机制</p>
<p>中断（Interrupt）是处理器接收到来自外部设备（如键盘、鼠标、网络接口等）的信号，通知处理器需要进行处理。</p>
<p>中断可以是<strong>内部中断（如时钟中断）或外部中断（如I/O设备中断）</strong>。处理器在接收到中断信号后，会暂停当前任务，保存当前状态并执行相应的中断处理程序，然后再返回到原来的任务。</p>
<p>异常（Exception）是处理器在执行指令时遇到的一些意外情况，<strong>比如除零错误、非法指令、内存访问错误等。</strong>异常会导致当前指令的执行被中断，处理器会跳转到异常处理程序进行相应的处理。又叫异常中断</p>
<p>下面是一个表格，总结了中断和异常的区别以及企业项目开发例子：</p>
<table>
<thead>
<tr>
<th>区别</th>
<th>中断</th>
<th>异常</th>
</tr>
</thead>
<tbody>
<tr>
<td>触发原因</td>
<td>外部事件触发，来自外部设备的信号</td>
<td>指令执行时遇到的意外情况</td>
</tr>
<tr>
<td>处理方式</td>
<td>暂停当前任务，执行中断处理程序</td>
<td>跳转到异常处理程序进行相应的处理</td>
</tr>
<tr>
<td>例子</td>
<td>高性能网络数据处理系统中的网络接口中断</td>
<td>操作系统/虚拟化平台中的访存异常:空指针引用</td>
</tr>
</tbody>
</table>
<p>当涉及到高性能网络数据处理系统时，网络接口中断是一个非常重要的概念。在这样的系统中，网络接口中断通常是由网络设备（如网卡）发出的信号，表示有数据包到达或其他网络事件发生。处理这些中断信号对于高性能网络处理系统来说至关重要，因为它们需要及时地处理传入的数据包以确保网络的稳定性和性能。</p>
<p>举例来说，在一个高性能的网络数据处理系统中，当网络接口收到一个数据包时，它会产生一个中断信号，通知处理器需要处理这个数据包。中断处理程序可能会涉及到数据包的解析、验证、路由选择等操作，然后将数据包传递给应用程序进行进一步处理。这个过程需要在非常短的时间内完成，以确保网络数据能够及时地被处理，从而保证了整个网络系统的稳定性和可靠性。</p>
<p>在另一方面，操作系统或虚拟化平台中的访存异常是另一个常见的情况。在这样的系统中，访存异常通常是由应用程序尝试访问无效的内存地址、空指针引用或越界访问内存等情况引起的。处理这些访存异常对于操作系统或虚拟化平台来说也是至关重要的，因为它们需要确保系统能够及时地检测到这些异常情况，并采取相应的措施来保护系统的稳定性和安全性。</p>
<p>因此，在企业级的高性能网络数据处理系统和操作系统/虚拟化平台中，中断和访存异常都是非常重要的概念。它们确保了系统能够及时地响应外部事件和处理意外情况，从而保证了系统的可靠性和稳定性。</p>
<h4 id="x86">x86实模式下的中断向量表</h4>
<p>CS:IP  相当于PC寄存器</p>
<p><img alt="Screen Shot 2018-09-30 at 9.40.53 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215153807924-770782544.png" /></p>
<p><img alt="image-20231122141513292" src="../pic/image-20231122141513292.png" /></p>
<p><strong>中断向量表里面存着中断服务函数（触发异常或者中断需要执行的修复操作）的入口地址</strong></p>
<ul>
<li>
<p>具体流程</p>
<p>现在比较流行的个人计算机的内部结构。它如果运行在实模式下，就可以认为它是一个非常快的8086。因此，当CPU复位之后，也会去1兆地址空间的最高的16个Byte的位置去取第一条指令，<strong>这个地址会被南北桥芯片组引导到BIOS芯片。CPU执行BIOS芯片当中的指令，对主板上的各个设备进行基本的配置。其中一项工作，就是在主存地址0的地方构建出中断向量表，所谓构建中断向量表，也就向主存中最低的那1K的字节填写那些中断向量。</strong>构建好了中断向量表，又准备好了中断服务程序之后，CPU再遇到中断，就可以访问主存中的中断向量表，并调用对应的中断服务程序了。</p>
</li>
</ul>
<h4 id="x86_1">( 拓展 ) x86保护模式下的寻址方式</h4>
<blockquote>
<p>我们知道，现在的CPU其实主要不是运行在实模式下，内存也并不是仅仅只有一兆了。所以，CPU对存储器的访问方式也发生了变化。</p>
</blockquote>
<p><img alt="Screen Shot 2018-09-30 at 9.41.26 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215153807749-669100558.png" /></p>
<p>我们以指令的寻址为例，在实模式下是用代码段寄存器CS和指令指针计存器IP进行组合。这两个寄存器都是16位的，它们的组合用段加偏移的方式产生一个20位的地址。</p>
<p>但是从386开始，指令指针计存器就从16位扩展到了32位，也就是EIP计存器。那么它的寻址能力就有了2的32次方也就是4G个字节单元。而从386开始，32位的CPU对外也就是32位的地址线，能够寻址的范围也是2的32次方。在这时候，指令指针寄存器（EIP）的宽度和实际需要寻址的范围已经是一一对应的了。 </p>
<p>所以，在保护模式下，虽然逻辑地址还是写成CS寄存器和EIP寄存器的形式，但物理地址的产生方式已经和实模式完全不同了。(采用描述符)</p>
<p><img alt="Screen Shot 2018-09-30 at 9.41.35 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215153808356-7555368.png" /></p>
<p>在保护模式下，<strong>段基址并不是存放在CS寄存器当中，而是存放在内存中的。</strong></p>
<p>在内存当中的某个地方，存放着一张表，称为描述符表。这张表一共有8192（2^13^）个表项，每个表项由8（2323）个字节构成，就被称为一个描述符。这个描述符当中，<strong>第2，3，4个字节和第7个字节这一共4个字节是基地址，这个地址就对应了实模式下保存在CS寄存器当中的内容。</strong></p>
<p>描述符当中，除了基地址之外，还有一些别的内容。如段界限，它指明了这个段究竟有多长；还有权限这里面有若干个比特，指明了这个段的内容是否可读，是否可写等等。</p>
<p>这些描述符是存放在内存中的，CPU又是如何能访问到呢？所以，在 CPU当中实际上是<strong>修改了CS寄存器的使用方式</strong>。我们可以想一想为什么总共有8192个描述符? 这和CS计存器的宽度是有关系的，CS计存器是16位宽的。所以，它一共可以寻址2的16次方个内存单元，这就是64K。而因为每个描述符是8个字节，所以8192个描述符刚好是64K（8192 * 8=2^13^ * 2^3^=2^16^=64K）。<strong>用16位的CS寄存器就正好可以查找这么多个描述符。</strong></p>
<p>这个描述符表的地址并不像实模式下的中断向量表那样直接存放在0地址, 所以想要找到对应的描述符, <strong>CPU就得知道这个描述符表的起始地址</strong>. (相当于计算机管家在内存中的某个位置, 我需要在在CPU内部用一个寄存器来存放这个管家的位置)</p>
<p>所以CPU中新了设置一个的寄存器，叫<strong>GDTR，用于保存这张描述符表的起始地址。</strong></p>
<blockquote>
<p>那么又得问了？这个GDTR的内容是从哪里来的呢？实际是因为x86的CPU在启动的时候都会先进入实模式。在实模式下，会在内存的某一个地方，先把这张描述符表都填好，然后将这张表的起始地址填到GDTR计存器当中去。这（GDTR）也是CPU内部的一个计存器，只不过它不像EX，EDX这些寄存器可以用作数据的运算，它是一个特殊的寄存器，但也是可以用特定的指令进行访问的。</p>
</blockquote>
<ul>
<li>
<p>最后总结一下, 在保护模式下CPU访问内存的流程:</p>
<p><strong>GDTR: 描述符表   CS: 段选择子(符表的偏移地址) + 段信息</strong></p>
</li>
<li>
<p>CPU每次要访问存储区, 都得用到CS和GDTR寄存器.</p>
</li>
<li><strong>段选择子</strong>：CPU使用段选择子（存放在CS寄存器中）来获取对应的段描述符的索引值。(用于找到8192个段中的哪个段)</li>
<li><strong>GDT表访问</strong>：CPU使用段描述符的索引值在全局描述符表（GDT）中找到对应的描述符。(最终确定段描述符的位置)</li>
<li><strong>线性地址计算</strong>：从段描述符中获取基地址, 再从EIP获得偏移地址，使用这些信息计算出线性地址。</li>
<li><strong>内存访问</strong>：CPU使用线性地址来访问内存，获取想要的指令编码或数据。</li>
</ul>
<h4 id="x86_2">x86保护模式下的中断描述符表</h4>
<p>在保护模式下，每一次存储器的访问都必须要经历上述过程，那访问中断向量表也就不例外。而且不但如此，中断向量表的位置也发生了变化。</p>
<p><img alt="Screen Shot 2018-09-30 at 9.41.43 am" src="https://img2018.cnblogs.com/blog/605033/201812/605033-20181215153808749-1066418580.png" /></p>
<p>结合上图, 在保护模式下, CPU处理中断的流程如下：</p>
<ol>
<li>
<p><strong>中断描述符表初始化</strong>：系统初始化（BIOS）软件会在建立好中断描述符表后，将中断描述符表的起始地址和长度填入IDTR寄存器。</p>
</li>
<li>
<p><strong>中断类型号查找</strong>：当CPU发生中断时，根据中断类型号乘以8再加上IDTR寄存器中的内容，得到对应中断描述符的地址。</p>
</li>
<li>
<p><strong>中断描述符处理</strong>：CPU从中断描述符中获取段选择符和偏移地址（EIP）。</p>
</li>
<li>
<p><strong>段基值计算</strong>：CPU使用段选择符和GDT（全局描述符表）中对应的段描述符，找出对应的段基值。</p>
</li>
<li>
<p><strong>内存地址计算</strong>：CPU将段基值与偏移地址（EIP）相加，得到中断服务程序的入口地址。</p>
</li>
<li>
<p><strong>中断处理</strong>：CPU从中断服务程序的入口地址取回指令，开始中断的处理。</p>
</li>
</ol>
<p>总结：在保护模式下，处理中断的流程包括中断描述符表的初始化、中断类型号的查找、中断描述符的处理、段基值的计算、内存地址的计算以及最终的中断处理。整体上，这些步骤清晰地描绘了CPU在保护模式下处理中断的流程。</p>
<h2 id="io">IO</h2>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>